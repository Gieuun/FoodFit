<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeleaf.org">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<!-- Mobile Metas -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Site Metas -->
<title>음식 추천 - 유저정보 확인</title>
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="author" content="">
<!-- header_link begin -->
<th:block th:replace="fragments/header_link :: header_link" />
<!-- header_link end -->
<!-- 스타일시트 -->
<style>
p {
		margin-bottom: 10px; /* 라디오 버튼 아래 여백 설정 */
		margin-right: 10px; /* 라디오 버튼 오른쪽 여백 설정 */
}
</style>
</head>
<body>
		<!-- Start header -->
		<th:block th:replace="fragments/header :: header" />
		<!-- End header -->
		<!-- Start All Pages -->
		<div class="all-page-title page-breadcrumb">
				<div class="container text-center">
						<div class="row">
								<div class="col-lg-12">
										<h1>음식추천받기</h1>
								</div>
						</div>
				</div>
		</div>
		<!-- End All Pages -->
		<!-- Start Reservation -->
		<div class="reservation-box">
				<div class="container">
						<div class="row">
								<div class="col-lg-12">
										<div class="heading-title text-center">
												<p>아래의 유저정보를 확인해주세요</p>
										</div>
								</div>
						</div>
						<div class="row">
								<div class="col-lg-12 col-sm-12 col-xs-12">
										<div class="contact-block">
												<form id="InfoInputForm" method="post" action="/food/result">
														<div class="col-md-12">
																<div class="row">
																		<h3>성별</h3>
																		<p>
																				<input id="male" name="gender" type="radio" value="male"> 남성
																		</p>
																		<p>
																				<input id="female" name="gender" type="radio" value="female"> 여성
																		</p>
																</div>
														</div>
														<br>
														<div class="col-md-12">
																<div class="row">
																		<h3>연령</h3>
																		<p>
																				<input id="teen" name="age" type="radio" value="10"> 10대
																		</p>
																		<p>
																				<input id="twenties" name="age" type="radio" value="20"> 20대
																		</p>
																		<p>
																				<input id="thirties" name="age" type="radio" value="30"> 30대
																		</p>
																		<p>
																				<input id="forties" name="age" type="radio" value="40"> 40대
																		</p>
																		<p>
																				<input id="fifties" name="age" type="radio" value="50"> 50대
																		</p>
																		<p>
																				<input id="sixties" name="age" type="radio" value="60"> 60대 이상
																		</p>
																</div>
														</div>
														<br>
														<div class="col-md-12">
																<div class="row">
																		<h3>키</h3>
																		<p>
																				<input id="height" name="height" type="number" value="">
																		</p>
																		<h3>몸무게</h3>
																		<p>
																				<input id="weight" name="weight" type="number" value="">
																		</p>
																</div>
														</div>
														<br>
														<div class="col-md-12">
																<div class="row">
																		<h3>식습관 목표</h3>
																		<p>
																				<input type="radio" name="type" value="highProtein"> 근력향상 (단백질 섭취량 높이기)
																		</p>
																		<p>
																				<input type="radio" name="type" value="lowSugar"> 체중감량(탄수화물 줄이기)
																		</p>
																		<p>
																				<input type="radio" name="type" value="lowSodium"> 싱겁게 먹기 (저나트륨식)
																		</p>
																</div>
														</div>
												</form>
												<br>
												<div class="row">
														<div class="col-md-6 text-center">
																<button type="button" class="btn btn-common" id="bt_result">결과보러가기</button>
														</div>
												</div>
										</div>
								</div>
						</div>
				</div>
		</div>
		<!-- End Reservation -->
		<!-- Start Footer -->
		<th:block th:replace="fragments/footer :: footer" />
		<!-- End Footer -->
		<a href="#" id="back-to-top" title="Back to top" style="display: none;">&uarr;</a>
		<!-- footer_link begin -->
		<th:block th:replace="fragments/footer_link :: footer_link" />
		<!-- footer_link end -->
</body>
</html>
<script type="text/javascript">
	$(document).ready(function() {
		$("#bt_result").click(function() {
			//form의 데이터를 주워담을 array객체 만듦			
			let formDataArray = $("#InfoInputForm").serializeArray();
			
			// form 데이터 가져옴
			let formData = {};
			$.each(formDataArray, function(_, field){
				formData[field.name]=field.value;
			});
			
			/* 이전 로직 (백업용 주석)
			$("#InfoInputForm :input").each(function() {
				let input = $(this);
				if (input.is(":radio") && input.is(":checked")) {
					formData[input.attr("name")] = input.val();
				} else if (input.is(":text")) {
					formData[input.attr("name")] = input.val();
				}
			});
			*/

			// ajax로 전달 요청

			$.ajax({
				url : "/food/result",
				type : "POST",				
				
				contentType : "application/json",
				data : JSON.stringify(formData),
				success : function(result, status, xhr) {
					alert("나에게 맞는 음식이 선정됐습니다. 다음의 결과를 확인해주세요 :D");
					window.location.href = "/food/result";
				},
				error : function(xhr, status, err) {
					alert("서버에 오류가 있습니다. 이용에 불편을 드려 죄송합니다.");
				}
			});
		});
	});
</script>
