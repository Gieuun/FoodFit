<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Mobile Metas -->
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Site Metas -->
<title>회원가입</title>
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="author" content="">

<!-- 헤더 링크 -->
<!-- header_link begin -->
<th:block th:replace="~{fragments/header_link :: header_link}" />
<!-- header_link end -->

<!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
<style type="text/css">
.btArea {
	display: flex;
}
</style>
</head>
<body>

	<!-- Start header -->
	<th:block th:replace="~{fragments/header :: header}" />
	<!-- End header -->


	<!-- Start All Pages -->
	<div class="all-page-title page-breadcrumb">
		<div class="container text-center">
			<div class="row">
				<div class="col-lg-12">
					<h1>FoodFit!</h1>
				</div>
			</div>
		</div>
	</div>
	<!-- End All Pages -->

	<!-- Start Contact -->
	<div class="contact-box">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<div class="heading-title text-center">
						<h2>회원가입</h2>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-12">
					<form id="join_form">
						<div class="row">
							<input type="hidden" name="sns.snsName" value="homepage">
							
							<div class="col-md-12">
								<div class="form-group">
									<input type="text" id="name" class="form-control" name="name"
										placeholder="이름을 입력해주세요">
								</div>
							</div>

							<div class="col-md-12">
								<div class="form-group">
									<input type="text" id="id" class="form-control" name="id"
										placeholder="아이디를 입력해주세요">

								</div>
							</div>

							<div class="col-md-12">

								<div class="form-group">
									<input type="password" id="password" class="form-control"
										name="pwd" placeholder="비밀번호를 입력해 주세요">

								</div>

								<div class="form-group">
									<input type="password" id="passwordCheck" class="form-control"
										name="pwdCheck" placeholder="비밀번호를 다시 입력해 주세요">

								</div>

							</div>

							<div class="col-md-12">
								<div class="form-group">
									<input type="email" id="email" class="form-control"
										name="email" placeholder="이메일을 입력해 주세요">

								</div>
							</div>

							<div class="col-md-12">
								<div class="submit-button text-center btArea">
									<button class="btn btn-common" id="bt_prev" type="button"
										onClick="prev()">이전</button>
									<button class="btn btn-common" id="bt_health" type="button">건강정보입력</button>
								</div>
							</div>

						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
	<!-- End Contact -->

	<!-- Start Footer -->
	<div th:insert="~{fragments/footer :: footer}"></div>
	<!-- End Footer -->

	<a href="#" id="back-to-top" title="Back to top" style="display: none;">&uarr;</a>

	<!-- js link -->
	<div th:insert="~{fragments/footer_link :: footer_link}"></div>

</body>
</html>


<script type="text/javascript">

	

function getAuthForm(sns){
	$.ajax({
		url:"/rest/recomember/authform/"+sns,
		type:"GET",
		success:function(result, status, xhr){
			location.href=result;
		},
		error: function(xhr, setatus, error){
			//에러처리
			console.error("AJAX에러:", error);
			alert("권한이 없거나 요청에 실패했습니다");
		}
	});
}

	function healthCheck() {
		console.log($("#join_form").serialize());

		//비동기로, 서버에회원정보 임시로 저장 후, 
		$.ajax({
			url : "/rest/recomember/temp",
			type : "post",
			data : $("#join_form").serialize(),
			success : function(response) {
				alert(response)
				window.location.href ="/recomember/healthform"
			},
			error : function(xhr, status, err) {
				alert("회원정보 저장 실패");
			}
		});
	}

	$(function() {
		$("#bt_health").click(function() {
				healthCheck();			
		});
		$(function() {
			$("#bt_prev").click(function() {
				location.href = "/recomember/loginform"
			});
		})

	});
</script>



