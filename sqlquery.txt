-- sns 테이블 만들기
create  table  sns(
	snsIdx  int primary key auto_increment 
	, snsName  varchar(12)
);

insert into sns(snsName) values('google');
insert into sns(snsName) values('naver');
insert into sns(snsName) values('kakao');
insert into sns(snsName) values('homepage');

--role 테이블 만들기
create  table  role(
	roleIdx  int primary key auto_increment 
	, roleName  varchar(12)
);

insert into role(roleName) values('ADMIN');
insert into role(roleName) values('USER');
insert into role(roleName) values('GUEST');


-- 회원테이블 만들기
-- member에 관리자 계정 추가
create table member(
   	  memberIdx int primary key auto_increment  
	, name varchar(20)
	, id varchar(20)
	, pwd varchar(20)
	, email varchar(30)
	, roleIdx int
	, snsIdx int 
	, constraint fk_role_member  foreign key (roleIdx) references role (roleIdx)
	, constraint fk_sns_member  foreign key (snsIdx) references sns (snsIdx)
) default character set utf8;


insert into member(name, id, pwd, email, roleIdx, snsIdx) values('admin', 'admin', '1234', 'a', 1, 4);


--회원추가정보 테이블
create table member_detail(
    memberDetailIdx int primary key auto_increment
    , gender varchar(10)
    , age int(10) default 0
    , height int(10) default 0
    , weight int(10) default 0
    , memberIdx int
    , constraint fk_member_member_detail foreign key (memberIdx) references member (memberIdx)
) default character set utf8;

--비선호음식 테이블
create table disliked_food(
   	  dislikedFoodIdx int primary key auto_increment  
	, disfoodName varchar(100)
	, memberDetailIdx int
	, constraint fk_member_detail_disliked_food_idx foreign key (memberDetailIdx) references member_detail (memberDetailIdx)
) default character set utf8;

-- 음식 테이블 (API 데이터를 추출하여 보관)
CREATE TABLE fooddb (
    foodIdx INT AUTO_INCREMENT PRIMARY KEY,
    foodname VARCHAR(255) NOT NULL,     
    kcal FLOAT,               
    carbohydrate FLOAT,
    protein FLOAT,         
    fat FLOAT,               
    sugar FLOAT,           
    sodium FLOAT
);







--알러지정보 테이블 (보류)
create table allergy(
   	  allergy_idx int primary key auto_increment  
	, allergy_name varchar(100)
	, member_detail_idx int
	, member_idx int
	, constraint fk_member_detail_allergy  foreign key (member_detail_idx) references member_detail (member_detail_idx)
	, constraint fk_member_allergy  foreign key (member_idx) references member (member_idx)
) default character set utf8;